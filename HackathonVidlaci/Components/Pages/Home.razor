@page "/"
@using HackathonVidlaci.Classes

<PageTitle>PamatkyNaHadky</PageTitle>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <style>
        body {
            background-color: #f7efd3; /* Light cream background */
        }

        h1 {
            color: #475c6c; /* Dark blue-grey for the title */
        }

        p {
            color: #8a8583; /* Medium grey for the paragraph */
        }

        select, input {
            border-color: #cd8b62; /* Warm terracotta for form borders */
        }

        select:focus, input:focus {
            border-color: #475c6c; /* Dark blue-grey on focus */
            box-shadow: 0 0 5px rgba(71, 92, 108, 0.5);
        }

        .container {
            display: flex;
            gap: 20px; /* Adds space between the form and the map */
            align-items: flex-start; /* Aligns the items at the top */
        }

        /* Make the form slimmer and the map wider */
        .form-group {
            flex: 1; /* The form takes up 1 part of the available space */
            max-width: 30%; /* Restrict form width */
        }

        .map-container {
            flex: 4; /* The map takes up 4 parts of the available space */
            height: 500px; /* Keep the height fixed */
            background-color: #eed7a1; /* Soft beige map placeholder */
            border: 2px solid #cd8b62; /* Terracotta border */
        }

        .header {
            text-align: center; /* Center-align the heading and paragraph */
            margin-bottom: 30px; /* Add spacing below the header */
        }
    </style>
</head>

<!-- Header Section -->
<div class="header">
    <h1>Památky Na Hádky</h1>
    <p>Zde najdete zábavu pro vás i celou vaši rodinu</p>
</div>

<!-- Flexbox container for form and map -->
<div class="container">
    <!-- Form Section -->
    <Form class="form-group">
        <div>
            <label for="SexID">Pohlaví</label>
            <select name="SexName" id="SexID" class="form-control">
                <option selected disabled>...</option>
                <option>Muž</option>
                <option>Žena</option>
                <option>Útočná helikoptéra</option>
                <option>Nechci uvádět</option>
            </select>
        </div>
        <div>
            <label for="AgeID">Věk</label>
            <Input type="number" max="99" id="AgeID" name="AgeName" class="form-control" />
        </div>
        <div>
            <label for="kidsNumberID">Počet dětí</label>
            <input id="kidsNumberID" name="KidsNumberName" type="number" min="0" class="form-control" />
        </div>
        <div>
            <label for="timeID">Délka zábavy</label>
            <input type="time" max="12:00" step="600" class="form-control" />
        </div>
        <div>
            <label for="budgetID">Rozpočet (KČ)</label>
            <input type="number" class="form-control" />
        </div>
        <div>
            <label for="transportID">Možnost přepravy</label>
            <select class="form-control">
                <option selected disabled>...</option>
                <option>Automobil</option>
                <option>Pěšky</option>
                <option>MHD</option>
            </select>
        </div>
    </Form>

    <!-- Map Section -->
    <div class="map-container" id="map">
        <p style="text-align: center; color: #475c6c;">Mapa zde</p>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
<script>
    var map = L.map('map').setView([50.2042646, 15.8267867], 13); // Default location (London)

    // Load and display a tile layer on the map (OpenStreetMap tiles)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Check if geolocation is available
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            // Get user's current coordinates
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;

            // Update the map to the user's location
            map.setView([lat, lon], 13);

            // Add a marker at the user's current location
            L.marker([lat, lon]).addTo(map)
                .bindPopup("Jste zde!")
                .openPopup();
        }, function (error) {
            alert("Nepodařilo se nám získat Vaši lokaci z důvodu: " + error.message);
        });
    } else {
        alert("Geolokace není podporována ve Vašem prohlížeči.");
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HZ5S65z4FcAz7QHnA9EjZCQKNjDd6V/QfbuSnP0MtXMQXpTFU/yICp8HkmMfQ0zz"
        crossorigin="anonymous"></script>
